--
-- PostgreSQL database dump
--

\restrict zUN6e1b4sjMclP634iP4DhhbkCgh4v2huGByCqJkjAU9IgHdsm6sBo3GBbjrdOX

-- Dumped from database version 16.10
-- Dumped by pg_dump version 17.6

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: gestionapp
--

-- *not* creating schema, since initdb creates it


ALTER SCHEMA public OWNER TO gestionapp;

--
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA public;


--
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


--
-- Name: trigger_set_timestamp(); Type: FUNCTION; Schema: public; Owner: gestionapp
--

CREATE FUNCTION public.trigger_set_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$

BEGIN

  NEW.updated_at = now();

  RETURN NEW;

END;

$$;


ALTER FUNCTION public.trigger_set_timestamp() OWNER TO gestionapp;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: client; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.client (
    id integer NOT NULL,
    nom character varying(255) NOT NULL,
    prenom character varying(255),
    email character varying(255),
    telephone character varying(20),
    createdat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    actif boolean,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.client OWNER TO gestionapp;

--
-- Name: client_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.client_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.client_id_seq OWNER TO gestionapp;

--
-- Name: client_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.client_id_seq OWNED BY public.client.id;


--
-- Name: commande; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.commande (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    numero character varying(50),
    total_cmd numeric(10,2) DEFAULT 0,
    statut character varying(50) NOT NULL,
    createdat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    clientid integer,
    utilisateurid integer,
    deletedat timestamp without time zone,
    date_commande date,
    actif boolean,
    statut_paiement character varying(255),
    montant_paye numeric DEFAULT 0,
    montant_restant numeric DEFAULT 0
);


ALTER TABLE public.commande OWNER TO gestionapp;

--
-- Name: commande_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.commande_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.commande_id_seq OWNER TO gestionapp;

--
-- Name: commande_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.commande_id_seq OWNED BY public.commande.id;


--
-- Name: commandeproduit; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.commandeproduit (
    id integer NOT NULL,
    quantite integer NOT NULL,
    prix_total numeric(10,2) NOT NULL,
    produitid integer NOT NULL,
    commandeid integer NOT NULL,
    createdat timestamp without time zone,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.commandeproduit OWNER TO gestionapp;

--
-- Name: commandeproduit_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.commandeproduit_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.commandeproduit_id_seq OWNER TO gestionapp;

--
-- Name: commandeproduit_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.commandeproduit_id_seq OWNED BY public.commandeproduit.id;


--
-- Name: commandeservice; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.commandeservice (
    id integer NOT NULL,
    quantite integer NOT NULL,
    prix_total numeric(10,2) NOT NULL,
    serviceid integer NOT NULL,
    commandeid integer NOT NULL,
    createdat timestamp without time zone,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.commandeservice OWNER TO gestionapp;

--
-- Name: commandeservice_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.commandeservice_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.commandeservice_id_seq OWNER TO gestionapp;

--
-- Name: commandeservice_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.commandeservice_id_seq OWNED BY public.commandeservice.id;


--
-- Name: compte; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.compte (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    nom text NOT NULL,
    email text,
    telephone text,
    adresse text,
    immatriculation text,
    logo_path text,
    primary_color character varying(7),
    secondary_color character varying(7),
    utilisateur_id uuid,
    is_active boolean DEFAULT true NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.compte OWNER TO gestionapp;

--
-- Name: facture; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.facture (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    numero character varying(50) NOT NULL,
    fichier character varying(255) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    commandeid integer NOT NULL,
    fichier_pdf character varying
);


ALTER TABLE public.facture OWNER TO gestionapp;

--
-- Name: facture_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.facture_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.facture_id_seq OWNER TO gestionapp;

--
-- Name: facture_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.facture_id_seq OWNED BY public.facture.id;


--
-- Name: inventory_mouvement; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.inventory_mouvement (
    id integer NOT NULL,
    produitid integer,
    quantite integer NOT NULL,
    type character varying(10) NOT NULL,
    source character varying(100),
    utilisateurid integer,
    note text,
    createdat timestamp with time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.inventory_mouvement OWNER TO gestionapp;

--
-- Name: inventory_mouvement_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.inventory_mouvement_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.inventory_mouvement_id_seq OWNER TO gestionapp;

--
-- Name: inventory_mouvement_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.inventory_mouvement_id_seq OWNED BY public.inventory_mouvement.id;


--
-- Name: notification; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.notification (
    id integer NOT NULL,
    utilisateur_id integer,
    titre character varying(255) NOT NULL,
    message text NOT NULL,
    meta jsonb,
    lu boolean DEFAULT false,
    createdat timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    updatedat timestamp with time zone
);


ALTER TABLE public.notification OWNER TO gestionapp;

--
-- Name: notification_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.notification_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.notification_id_seq OWNER TO gestionapp;

--
-- Name: notification_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.notification_id_seq OWNED BY public.notification.id;


--
-- Name: paiement; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.paiement (
    id integer NOT NULL,
    commande_id integer NOT NULL,
    montant numeric(15,2) NOT NULL,
    mode_paiement character varying(50) NOT NULL,
    date_paiement timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT paiement_mode_paiement_check CHECK (((mode_paiement)::text = ANY ((ARRAY['cash'::character varying, 'mobile_money'::character varying, 'carte'::character varying, 'cheque'::character varying, 'virement'::character varying])::text[])))
);


ALTER TABLE public.paiement OWNER TO gestionapp;

--
-- Name: paiement_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.paiement_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.paiement_id_seq OWNER TO gestionapp;

--
-- Name: paiement_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.paiement_id_seq OWNED BY public.paiement.id;


--
-- Name: produit; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.produit (
    id integer NOT NULL,
    nom character varying(255) NOT NULL,
    description text,
    prix_unitaire numeric(10,2) NOT NULL,
    stock_actuel integer NOT NULL,
    actif boolean DEFAULT true,
    createdat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.produit OWNER TO gestionapp;

--
-- Name: produit_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.produit_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.produit_id_seq OWNER TO gestionapp;

--
-- Name: produit_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.produit_id_seq OWNED BY public.produit.id;


--
-- Name: recu; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.recu (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    numero character varying(50) NOT NULL,
    fichier character varying(255) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    venteid integer NOT NULL,
    createdat timestamp without time zone,
    fichier_pdf character varying
);


ALTER TABLE public.recu OWNER TO gestionapp;

--
-- Name: recu_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.recu_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.recu_id_seq OWNER TO gestionapp;

--
-- Name: recu_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.recu_id_seq OWNED BY public.recu.id;


--
-- Name: service; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.service (
    id integer NOT NULL,
    nom character varying(255) NOT NULL,
    description text,
    prix_unitaire numeric(10,2) NOT NULL,
    actif boolean DEFAULT true,
    createdat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.service OWNER TO gestionapp;

--
-- Name: service_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.service_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.service_id_seq OWNER TO gestionapp;

--
-- Name: service_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.service_id_seq OWNED BY public.service.id;


--
-- Name: tache; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.tache (
    id integer NOT NULL,
    nom character varying(255) NOT NULL,
    description text,
    date_debut timestamp without time zone NOT NULL,
    date_fin timestamp without time zone,
    frequence character varying(50),
    importance character varying(50),
    utilisateurid integer NOT NULL,
    statut character varying(255),
    createdat timestamp without time zone,
    updatedat timestamp without time zone,
    deletedat timestamp without time zone
);


ALTER TABLE public.tache OWNER TO gestionapp;

--
-- Name: tache_assignments; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.tache_assignments (
    id integer NOT NULL,
    tache_id integer NOT NULL,
    utilisateur_id integer NOT NULL,
    est_terminee boolean DEFAULT false,
    date_terminee timestamp with time zone,
    deletedat timestamp without time zone,
    createdat timestamp without time zone,
    updatedat timestamp without time zone
);


ALTER TABLE public.tache_assignments OWNER TO gestionapp;

--
-- Name: tache_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.tache_assignments_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tache_assignments_id_seq OWNER TO gestionapp;

--
-- Name: tache_assignments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.tache_assignments_id_seq OWNED BY public.tache_assignments.id;


--
-- Name: tache_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.tache_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tache_id_seq OWNER TO gestionapp;

--
-- Name: tache_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.tache_id_seq OWNED BY public.tache.id;


--
-- Name: utilisateur; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.utilisateur (
    id integer NOT NULL,
    nom character varying(255) NOT NULL,
    prenom character varying(255),
    email character varying(255) NOT NULL,
    telephone character varying(20),
    role character varying(50) NOT NULL,
    password_hash character varying(255) NOT NULL,
    actif boolean DEFAULT true,
    createdat timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updatedat timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.utilisateur OWNER TO gestionapp;

--
-- Name: utilisateur_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.utilisateur_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.utilisateur_id_seq OWNER TO gestionapp;

--
-- Name: utilisateur_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.utilisateur_id_seq OWNED BY public.utilisateur.id;


--
-- Name: vente; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.vente (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    numero character varying(50) NOT NULL,
    montant numeric(10,2) NOT NULL,
    statut character varying(50) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    commandeid integer,
    utilisateurid integer,
    deletedat timestamp without time zone,
    createdat timestamp without time zone,
    updatedat timestamp without time zone,
    actif boolean
);


ALTER TABLE public.vente OWNER TO gestionapp;

--
-- Name: vente_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.vente_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.vente_id_seq OWNER TO gestionapp;

--
-- Name: vente_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.vente_id_seq OWNED BY public.vente.id;


--
-- Name: vente_item; Type: TABLE; Schema: public; Owner: gestionapp
--

CREATE TABLE public.vente_item (
    id integer NOT NULL,
    vente_id integer NOT NULL,
    produit_id integer,
    service_id integer,
    commande_id integer,
    nom text,
    quantite numeric(12,2) DEFAULT 1 NOT NULL,
    prix_unitaire numeric(14,2) DEFAULT 0 NOT NULL,
    total numeric(14,2) DEFAULT 0 NOT NULL,
    actif boolean DEFAULT true,
    createdat timestamp with time zone DEFAULT now(),
    updatedat timestamp with time zone,
    deletedat timestamp with time zone
);


ALTER TABLE public.vente_item OWNER TO gestionapp;

--
-- Name: vente_item_id_seq; Type: SEQUENCE; Schema: public; Owner: gestionapp
--

CREATE SEQUENCE public.vente_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.vente_item_id_seq OWNER TO gestionapp;

--
-- Name: vente_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: gestionapp
--

ALTER SEQUENCE public.vente_item_id_seq OWNED BY public.vente_item.id;


--
-- Name: client id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.client ALTER COLUMN id SET DEFAULT nextval('public.client_id_seq'::regclass);


--
-- Name: commande id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commande ALTER COLUMN id SET DEFAULT nextval('public.commande_id_seq'::regclass);


--
-- Name: commandeproduit id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeproduit ALTER COLUMN id SET DEFAULT nextval('public.commandeproduit_id_seq'::regclass);


--
-- Name: commandeservice id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeservice ALTER COLUMN id SET DEFAULT nextval('public.commandeservice_id_seq'::regclass);


--
-- Name: facture id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.facture ALTER COLUMN id SET DEFAULT nextval('public.facture_id_seq'::regclass);


--
-- Name: inventory_mouvement id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.inventory_mouvement ALTER COLUMN id SET DEFAULT nextval('public.inventory_mouvement_id_seq'::regclass);


--
-- Name: notification id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.notification ALTER COLUMN id SET DEFAULT nextval('public.notification_id_seq'::regclass);


--
-- Name: paiement id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.paiement ALTER COLUMN id SET DEFAULT nextval('public.paiement_id_seq'::regclass);


--
-- Name: produit id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.produit ALTER COLUMN id SET DEFAULT nextval('public.produit_id_seq'::regclass);


--
-- Name: recu id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.recu ALTER COLUMN id SET DEFAULT nextval('public.recu_id_seq'::regclass);


--
-- Name: service id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.service ALTER COLUMN id SET DEFAULT nextval('public.service_id_seq'::regclass);


--
-- Name: tache id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache ALTER COLUMN id SET DEFAULT nextval('public.tache_id_seq'::regclass);


--
-- Name: tache_assignments id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache_assignments ALTER COLUMN id SET DEFAULT nextval('public.tache_assignments_id_seq'::regclass);


--
-- Name: utilisateur id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.utilisateur ALTER COLUMN id SET DEFAULT nextval('public.utilisateur_id_seq'::regclass);


--
-- Name: vente id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente ALTER COLUMN id SET DEFAULT nextval('public.vente_id_seq'::regclass);


--
-- Name: vente_item id; Type: DEFAULT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item ALTER COLUMN id SET DEFAULT nextval('public.vente_item_id_seq'::regclass);


--
-- Name: client client_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.client
    ADD CONSTRAINT client_pkey PRIMARY KEY (id);


--
-- Name: commande commande_code_key; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commande
    ADD CONSTRAINT commande_code_key UNIQUE (code);


--
-- Name: commande commande_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commande
    ADD CONSTRAINT commande_pkey PRIMARY KEY (id);


--
-- Name: commandeproduit commandeproduit_commandeid_produitid_key; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeproduit
    ADD CONSTRAINT commandeproduit_commandeid_produitid_key UNIQUE (commandeid, produitid);


--
-- Name: commandeproduit commandeproduit_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeproduit
    ADD CONSTRAINT commandeproduit_pkey PRIMARY KEY (id);


--
-- Name: commandeservice commandeservice_commandeid_serviceid_key; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeservice
    ADD CONSTRAINT commandeservice_commandeid_serviceid_key UNIQUE (commandeid, serviceid);


--
-- Name: commandeservice commandeservice_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeservice
    ADD CONSTRAINT commandeservice_pkey PRIMARY KEY (id);


--
-- Name: compte compte_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.compte
    ADD CONSTRAINT compte_pkey PRIMARY KEY (id);


--
-- Name: facture facture_commandeid_key; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.facture
    ADD CONSTRAINT facture_commandeid_key UNIQUE (commandeid);


--
-- Name: facture facture_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.facture
    ADD CONSTRAINT facture_pkey PRIMARY KEY (id);


--
-- Name: inventory_mouvement inventory_mouvement_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.inventory_mouvement
    ADD CONSTRAINT inventory_mouvement_pkey PRIMARY KEY (id);


--
-- Name: notification notification_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_pkey PRIMARY KEY (id);


--
-- Name: paiement paiement_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.paiement
    ADD CONSTRAINT paiement_pkey PRIMARY KEY (id);


--
-- Name: produit produit_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.produit
    ADD CONSTRAINT produit_pkey PRIMARY KEY (id);


--
-- Name: recu recu_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.recu
    ADD CONSTRAINT recu_pkey PRIMARY KEY (id);


--
-- Name: service service_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.service
    ADD CONSTRAINT service_pkey PRIMARY KEY (id);


--
-- Name: tache_assignments tache_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache_assignments
    ADD CONSTRAINT tache_assignments_pkey PRIMARY KEY (id);


--
-- Name: tache tache_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache
    ADD CONSTRAINT tache_pkey PRIMARY KEY (id);


--
-- Name: utilisateur utilisateur_email_key; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.utilisateur
    ADD CONSTRAINT utilisateur_email_key UNIQUE (email);


--
-- Name: utilisateur utilisateur_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.utilisateur
    ADD CONSTRAINT utilisateur_pkey PRIMARY KEY (id);


--
-- Name: vente_item vente_item_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item
    ADD CONSTRAINT vente_item_pkey PRIMARY KEY (id);


--
-- Name: vente vente_pkey; Type: CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente
    ADD CONSTRAINT vente_pkey PRIMARY KEY (id);


--
-- Name: idx_commande_clientid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_commande_clientid ON public.commande USING btree (clientid);


--
-- Name: idx_commande_utilisateurid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_commande_utilisateurid ON public.commande USING btree (utilisateurid);


--
-- Name: idx_commandeproduit_commandeid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_commandeproduit_commandeid ON public.commandeproduit USING btree (commandeid);


--
-- Name: idx_commandeservice_commandeid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_commandeservice_commandeid ON public.commandeservice USING btree (commandeid);


--
-- Name: idx_compte_utilisateur; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_compte_utilisateur ON public.compte USING btree (utilisateur_id);


--
-- Name: idx_facture_commandeid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_facture_commandeid ON public.facture USING btree (commandeid);


--
-- Name: idx_inventory_mouvement_produitid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_inventory_mouvement_produitid ON public.inventory_mouvement USING btree (produitid);


--
-- Name: idx_notification_user_lu_createdat; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_notification_user_lu_createdat ON public.notification USING btree (utilisateur_id, lu, createdat DESC);


--
-- Name: idx_recu_venteid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_recu_venteid ON public.recu USING btree (venteid);


--
-- Name: idx_tache_importance; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_tache_importance ON public.tache USING btree (importance);


--
-- Name: idx_tache_status; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_tache_status ON public.tache USING btree (statut);


--
-- Name: idx_tache_utilisateur; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_tache_utilisateur ON public.tache_assignments USING btree (utilisateur_id);


--
-- Name: idx_tache_utilisateurid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_tache_utilisateurid ON public.tache USING btree (utilisateurid);


--
-- Name: idx_vente_commandeid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_commandeid ON public.vente USING btree (commandeid);


--
-- Name: idx_vente_item_commande_id; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_item_commande_id ON public.vente_item USING btree (commande_id);


--
-- Name: idx_vente_item_produit_id; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_item_produit_id ON public.vente_item USING btree (produit_id);


--
-- Name: idx_vente_item_service_id; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_item_service_id ON public.vente_item USING btree (service_id);


--
-- Name: idx_vente_item_vente_id; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_item_vente_id ON public.vente_item USING btree (vente_id);


--
-- Name: idx_vente_utilisateurid; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE INDEX idx_vente_utilisateurid ON public.vente USING btree (utilisateurid);


--
-- Name: ux_compte_email; Type: INDEX; Schema: public; Owner: gestionapp
--

CREATE UNIQUE INDEX ux_compte_email ON public.compte USING btree (email) WHERE (email IS NOT NULL);


--
-- Name: compte set_timestamp_compte; Type: TRIGGER; Schema: public; Owner: gestionapp
--

CREATE TRIGGER set_timestamp_compte BEFORE UPDATE ON public.compte FOR EACH ROW EXECUTE FUNCTION public.trigger_set_timestamp();


--
-- Name: commande commande_clientid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commande
    ADD CONSTRAINT commande_clientid_fkey FOREIGN KEY (clientid) REFERENCES public.client(id) ON DELETE SET NULL;


--
-- Name: commande commande_utilisateurid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commande
    ADD CONSTRAINT commande_utilisateurid_fkey FOREIGN KEY (utilisateurid) REFERENCES public.utilisateur(id) ON DELETE SET NULL;


--
-- Name: commandeproduit commandeproduit_commandeid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeproduit
    ADD CONSTRAINT commandeproduit_commandeid_fkey FOREIGN KEY (commandeid) REFERENCES public.commande(id) ON DELETE CASCADE;


--
-- Name: commandeproduit commandeproduit_produitid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeproduit
    ADD CONSTRAINT commandeproduit_produitid_fkey FOREIGN KEY (produitid) REFERENCES public.produit(id) ON DELETE CASCADE;


--
-- Name: commandeservice commandeservice_commandeid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeservice
    ADD CONSTRAINT commandeservice_commandeid_fkey FOREIGN KEY (commandeid) REFERENCES public.commande(id) ON DELETE CASCADE;


--
-- Name: commandeservice commandeservice_serviceid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.commandeservice
    ADD CONSTRAINT commandeservice_serviceid_fkey FOREIGN KEY (serviceid) REFERENCES public.service(id) ON DELETE CASCADE;


--
-- Name: facture facture_commandeid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.facture
    ADD CONSTRAINT facture_commandeid_fkey FOREIGN KEY (commandeid) REFERENCES public.commande(id) ON DELETE CASCADE;


--
-- Name: paiement fk_paiement_commande; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.paiement
    ADD CONSTRAINT fk_paiement_commande FOREIGN KEY (commande_id) REFERENCES public.commande(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: inventory_mouvement inventory_mouvement_produitid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.inventory_mouvement
    ADD CONSTRAINT inventory_mouvement_produitid_fkey FOREIGN KEY (produitid) REFERENCES public.produit(id) ON DELETE SET NULL;


--
-- Name: recu recu_venteid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.recu
    ADD CONSTRAINT recu_venteid_fkey FOREIGN KEY (venteid) REFERENCES public.vente(id) ON DELETE CASCADE;


--
-- Name: tache_assignments tache_assignments_tache_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache_assignments
    ADD CONSTRAINT tache_assignments_tache_id_fkey FOREIGN KEY (tache_id) REFERENCES public.tache(id) ON DELETE CASCADE;


--
-- Name: tache_assignments tache_assignments_utilisateur_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache_assignments
    ADD CONSTRAINT tache_assignments_utilisateur_id_fkey FOREIGN KEY (utilisateur_id) REFERENCES public.utilisateur(id) ON DELETE CASCADE;


--
-- Name: tache tache_utilisateurid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.tache
    ADD CONSTRAINT tache_utilisateurid_fkey FOREIGN KEY (utilisateurid) REFERENCES public.utilisateur(id) ON DELETE CASCADE;


--
-- Name: vente vente_commandeid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente
    ADD CONSTRAINT vente_commandeid_fkey FOREIGN KEY (commandeid) REFERENCES public.commande(id) ON DELETE SET NULL;


--
-- Name: vente_item vente_item_commande_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item
    ADD CONSTRAINT vente_item_commande_id_fkey FOREIGN KEY (commande_id) REFERENCES public.commande(id) ON DELETE SET NULL;


--
-- Name: vente_item vente_item_produit_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item
    ADD CONSTRAINT vente_item_produit_id_fkey FOREIGN KEY (produit_id) REFERENCES public.produit(id) ON DELETE SET NULL;


--
-- Name: vente_item vente_item_service_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item
    ADD CONSTRAINT vente_item_service_id_fkey FOREIGN KEY (service_id) REFERENCES public.service(id) ON DELETE SET NULL;


--
-- Name: vente_item vente_item_vente_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente_item
    ADD CONSTRAINT vente_item_vente_id_fkey FOREIGN KEY (vente_id) REFERENCES public.vente(id) ON DELETE CASCADE;


--
-- Name: vente vente_utilisateurid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: gestionapp
--

ALTER TABLE ONLY public.vente
    ADD CONSTRAINT vente_utilisateurid_fkey FOREIGN KEY (utilisateurid) REFERENCES public.utilisateur(id) ON DELETE SET NULL;


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: gestionapp
--

REVOKE USAGE ON SCHEMA public FROM PUBLIC;


--
-- PostgreSQL database dump complete
--

\unrestrict zUN6e1b4sjMclP634iP4DhhbkCgh4v2huGByCqJkjAU9IgHdsm6sBo3GBbjrdOX

